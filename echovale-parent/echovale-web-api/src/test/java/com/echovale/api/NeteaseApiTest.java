package com.echovale.api;

import com.netease.music.api.autoconfigure.configuration.api.MusicApi;
import com.netease.music.api.autoconfigure.configuration.module.MusicModule;
import com.netease.music.api.autoconfigure.configuration.pojo.result.MusicUrlResult;
import com.netease.music.api.autoconfigure.configuration.util.Init;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import java.util.List;

/**
 * @author 30531
 * @version 1.0
 * @description: TODO
 * @date 2025/6/23 22:33
 */
@Slf4j
@SpringBootTest
public class NeteaseApiTest {

    @Autowired
    Init init;
    @Autowired
    MusicApi musicApi;


    private void initCookie() {
        init.setLocalCookie("NMTID=00OmhC3rhWqkmkbvk9csdH5XCadI04AAAGRUUDO6Q; _ntes_nnid=b218cfe313c2dcaa54feb2e6f0f91f2e,1723641846099; _ntes_nuid=b218cfe313c2dcaa54feb2e6f0f91f2e; WEVNSM=1.0.0; WNMCID=ffvouj.1723641846662.01.0; __snaker__id=qArApKgRaNMTh66w; sDeviceId=YD-hFpKMuojW8tFE1AQEUbWQzdDMECjOkKA; WM_TID=%2BmrdELgLqVhEAVUFFELXFjIXYECiPHGb; ntes_kaola_ad=1; _ga=GA1.1.127948830.1725215043; _ga_EPDQHDTJH5=GS1.1.1736092978.1.1.1736092982.0.0.0; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%2219570f08245b40-06d2e908a380bcc-4c657b58-1384801-19570f082461609%22%2C%22first_id%22%3A%22%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E8%87%AA%E7%84%B6%E6%90%9C%E7%B4%A2%E6%B5%81%E9%87%8F%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC%22%2C%22%24latest_referrer%22%3A%22https%3A%2F%2Fwww.bing.com%2F%22%7D%2C%22identities%22%3A%22eyIkaWRlbnRpdHlfY29va2llX2lkIjoiMTk1NzBmMDgyNDViNDAtMDZkMmU5MDhhMzgwYmNjLTRjNjU3YjU4LTEzODQ4MDEtMTk1NzBmMDgyNDYxNjA5In0%3D%22%2C%22history_login_id%22%3A%7B%22name%22%3A%22%22%2C%22value%22%3A%22%22%7D%7D; _clck=12hgay3%7C2%7Cfu0%7C0%7C1705; Qs_lvt_382223=1725215042%2C1725693790%2C1741356566%2C1741356604; Qs_pv_382223=3237204859810105000%2C2747737008162744300%2C3241285445959108600%2C4114217228974340600%2C3033387302837452000; _ga_C6TGHFPQ1H=GS1.1.1741361273.5.0.1741361273.0.0.0; ntes_utid=tid._.lng%252B5Ru9nVBEFhUAEEKHQjJDNVG3PgZ3._.0.%2C.edd._.._.0; _iuqxldmzr_=32; __remember_me=true; JSESSIONID-WYYY=NeprGKnMCkshN7y%2BWJclXIWNzr7DGuSUTnmaRlS8FXiiZF0v7oxIfNnu9diVxzatUpW%2BxCqMaE06IoxkPxtA0buPwSRynwO3GyMEWa14Xshsc%5CzQamR9yPKr%2F4ETHeKN%2BynrzwBhcVoFt8kQcQQ%2BVketGdPir3kGb9xHhUEYFBOZFU54%3A1751544044828; WM_NI=VDZYQ1FQhxBv6D%2Fp%2F1As2N7K8vshLSX%2Ftg2VFy7chyD9AbFLlhGl4gzw7RwemPrEtoTX5x%2FV%2Fm0zx6yztQh00RgZRbisJgtXP9hcloYA5PAHBZX6wiM0XEbuv7XNgaKaOUI%3D; WM_NIKE=9ca17ae2e6ffcda170e2e6ee9bbc43a5f09bb3e950899a8aa7c84f969a9bb0cb6fb3969eb3d3458fab0090c82af0fea7c3b92a969c96bad43b868fa899c17ef69ce191ae3b83adfeafb641fcaabd89cf599cf1bc88b15e86a7f984eb7388e78f83c548b0b8898db76dbaa9f9b3f66faf90bea6f7659888fb99ae5eedb3009bfb3ebba6bcb2eb3cf48ea9bbd16aabad8688f75494e7a884ef659b9ffbb1c444828698d7f6638ff098a6e17fb6e998afe66b89bf81b6cc37e2a3; gdxidpyhxdE=GVixyl2WZS%5C3NkgljoG7T2bDVQRVtRuqdEQQlHEE7DoGwSMx%5CpfTY14Mpl6tZhOZ27eXlmceELc%2Fxo%5C1SztcORBAQJlitCPO8Bg3iwZNOv1Rph%2FVnV5P%2Fjax5fpge%2FOJNMBimflcwL0Ggp0f3zKxI%2BQ%2FYnVZzGx2yop9OfTTuEsiAaKi%3A1751543147666; NTES_YD_SESS=TZ5Mi0VLKKeOeh580xGYfkTMJKrXBOTpe6Q.hnU8hku3Eox_E6mDyt3KzIPiPCo323shtc71_wG3xJh0u5M7D9sBCJVnaSLgKnRsSJeYUHWSKTiPeLW1lLrjRhy0ZAXHKAMnAsOyR3f137gp2L_18ksFbYdNX3HrQlXdjC.SiyDLpSZy6ZDI5rZWBbLmtHlKzDZ1du5.m51bLhMpZY6X2o4CbXamzyNu8qUlnBR8f.rN1; S_INFO=1751542274|0|0&60##|15523532975; P_INFO=15523532975|1751542274|1|music|00&99|null&null&null#chq&null#10#0|&0||15523532975; __csrf=f1d0c1ab3839c7348b2499d45eaf5986; MUSIC_U=00840818D0F4F391832C46992F8EAB6156575757F71D4CBF1D0D024BB71D4461780FC73DEA19934A5B80A96E19C3B42C6F9FDD9C8489F4952A30892DC20FCC40132E3B2CAA43EC67076C9C2611B9BC741EB0B54D60306D0744B17BBB759A9384872BA2514E2651D124DB2A9818201A0625C9DF1065A2DD86A462EB3B4CD22189F3A80DE99B9223D6A021BD1BA021D0F108805254991DEE8A3186849E15CFE9A7CEE7297D1CD2AFA1652FA361BA54DB2BC3CB0BE04650DFCAFEE71BA30E9132CADB0F1E99D2362645B8A0149B5BA1C719644F76337DF8C85FF0647D1F358DBF0A4911B5D6FB33964E794144E87F199B334BC3D133CE7156324E67F18295A8B641A073DDA48E9AE39FFC51B95D72EDA062281287B0A7FE20FB56E7275CEAAA3C9C115C95798982125BA106C33AF03FA6944429DB06EA29F047A1DC8E561FC244D00E2A702131E9074A18E24C2C330BFBBEFDCE54E94F696A4F3421787AD1B7F8E2A8");
    }

    @Test
    public void getMusicUrl() throws Exception {
        initCookie();
        List<MusicUrlResult> musicV1Url = musicApi.getMusicV1Url(List.of("29572502"), MusicModule.Level.Hires);
        log.info("[NeteaseApiTest].[getMusicUrl] music url: {}", musicV1Url);
    }



}
